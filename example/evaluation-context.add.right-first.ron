op 90 : integer _
op 50 : _ + _
op 40 : _ is _
op 10 : _ -> _

syntax {
    e ::=                # 式
        n                # 数
      | e + e            # 足し算
    v ::= n              # 値
    n ::= <integer>      # 整数
}

# 評価文脈
context syntax {
    E ::= e + _ | _ + v  # 右から順に簡約
}

context rule {
    E [e1] -> E [e2] {   # 簡約規則
        e1 -> e2
    }
}

n1 + n2 -> n3 {
    <n3 is n1 + n2>
}

main {
    (1 + 2) + (3 + 4) -> x
    # x = 1 + 2 + 7
}